# Copyright Disclaimer: AI-Generated Content
# This file was created by GitHub Copilot, an AI coding assistant.
# AI-generated content is not subject to copyright protection and is provided
# without any warranty, express or implied, including warranties of merchantability,
# fitness for a particular purpose, or non-infringement.
# Use at your own risk.

[target.aarch64-linux-android]
# Configure as PIE (Position Independent Executable) for direct execution
# PIE is an EXEC-type binary that can be directly executed and also loaded by dlopen
rustflags = [
    "-C", "link-arg=-Wl,-e,main",
    "-C", "link-arg=-Wl,--dynamic-linker=/system/bin/linker64",
    "-C", "link-arg=-Wl,-rpath,$ORIGIN",
    "-C", "link-arg=-Wl,--enable-new-dtags",
    "-C", "link-arg=-pie",
    "-C", "relocation-model=pic",
    "-C", "link-arg=-Wl,--undefined=interp"
]

[target.x86_64-linux-android]
# Same configuration for x86_64 (for testing in redroid)
rustflags = [
    "-C", "link-arg=-Wl,-e,main",
    "-C", "link-arg=-Wl,--dynamic-linker=/system/bin/linker64",
    "-C", "link-arg=-Wl,-rpath,$ORIGIN",
    "-C", "link-arg=-Wl,--enable-new-dtags"
]
